var SpinningWheel={cellHeight:60,friction:.003,slotData:[],handleEvent:function(t){if("touchstart"==t.type)this.calculateSlotsWidth(),this.lockScreen(t),"sw-frame"==t.currentTarget.id&&this.scrollStart(t);else if("touchmove"==t.type)this.lockScreen(t),"sw-frame"==t.currentTarget.id&&this.scrollMove(t);else if("touchend"==t.type){if("sw-frame"==t.currentTarget.id){this.scrollEnd(t);var s=this;setTimeout(function(){s.scrollEndAction.apply(s,[s.activeSlot])},100)}}else"webkitTransitionEnd"==t.type&&this.backWithinBoundaries(t)},lockScreen:function(t){t.preventDefault(),t.stopPropagation()},reset:function(){this.slotEl=[],this.activeSlot=null,this.swWrapper=void 0,this.swSlotWrapper=void 0,this.swSlots=void 0,this.swFrame=void 0},calculateSlotsWidth:function(){for(var t=this.swSlots.getElementsByTagName("div"),s=0;s<t.length;s+=1)this.slotEl[s].slotWidth=t[s].offsetWidth},create:function(){var t,s,i,e,o;for(this.reset(),document.getElementById("sw-container").innerHTML="",container=document.createElement("div"),container.innerHTML='<div id="sw-slots-wrapper"> <div id="sw-slots"></div> </div> <div id="sw-frame"></div> </div>',container.style.webkitTransitionProperty="-webkit-transform",document.body.appendChild(container),this.swWrapper=container,this.swSlotWrapper=document.getElementById("sw-slots-wrapper"),this.swSlots=document.getElementById("sw-slots"),this.swFrame=document.getElementById("sw-frame"),s=0;s<this.slotData.length;s+=1){e=document.createElement("ul"),i="";for(t in this.slotData[s].values)i+='<li id="'+s+"_"+this.slotData[s].values[t]+'LI">'+this.slotData[s].values[t]+"</li>";e.innerHTML=i,o=document.createElement("div"),o.className=this.slotData[s].style,o.appendChild(e),this.swSlots.appendChild(o),e.slotPosition=s,e.slotYPosition=0,e.slotWidth=0,e.slotMaxScroll=this.swSlotWrapper.clientHeight-e.clientHeight-24,e.style.webkitTransitionTimingFunction="cubic-bezier(0, 0, 0.2, 1)",this.slotEl.push(e),this.slotData[s].defaultValue&&this.scrollToValue(s,this.slotData[s].defaultValue)}document.getElementById("sw-container").innerHTML="",document.getElementById("sw-container").appendChild(container),this.swFrame.addEventListener("touchstart",this,!1)},open:function(){this.create()},destroy:function(){try{this.swWrapper.removeEventListener("webkitTransitionEnd",this,!1),this.swFrame.removeEventListener("touchstart",this,!1)}catch(t){}document.removeEventListener("touchstart",this,!1),document.removeEventListener("touchmove",this,!1),this.slotData=[],this.cancelAction=function(){return!1},this.cancelDone=function(){return!0},this.scrollEndAction=function(){return!1},this.selectedItemAction=function(){return!1},this.reset()},addSlot:function(t,s,i){s||(s=""),s=s.split(" ");for(var e=0;e<s.length;e+=1)s[e]="sw-"+s[e];s=s.join(" ");var o={values:t,style:s,defaultValue:i};this.slotData.push(o)},getSelectedValues:function(){for(var t,s,i,e,o=[],l=[],i=0;i<this.slotEl.length;i++){this.slotEl[i].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[i].style.webkitTransitionDuration="0",this.slotEl[i].slotYPosition>0?this.setPosition(i,0):this.slotEl[i].slotYPosition<this.slotEl[i].slotMaxScroll&&this.setPosition(i,this.slotEl[i].slotMaxScroll),t=-Math.round(this.slotEl[i].slotYPosition/this.cellHeight),s=0;for(e in this.slotData[i].values){if(s==t){o.push(e),l.push(this.slotData[i].values[e]);break}s+=1}}return{keys:o,values:l}},getSlotValue:function(t){if(0>t||t>=this.slotEl.length)return{keys:null,values:null};var s,i=[],e=[];return s=-Math.round(this.slotEl[t].slotYPosition/this.cellHeight),s+=1,i.push(s),e.push(this.slotData[t].values[s]),{keys:i,values:e}},hideSlotValuesAfter:function(t,s,i){if("undefined"==typeof i||null==i)return console.log("did you forget to pass the length of this slot to hideSlotValuesAfter?"),!1;s++;for(var e=null;i>=s;)e=document.getElementById(t+"_"+s+"LI"),this.slotEl[t].removeChild(e),s+=1;this.slotEl[t].slotMaxScroll=this.swSlotWrapper.clientHeight-this.slotEl[t].clientHeight-86,e=null},showSlotValuesAfter:function(t,s,i){if("undefined"==typeof i||null==i)return console.log("did you forget to pass the length of this slot to showSlotValuesAfter?"),!1;for(s++;i>=s;){var e=document.getElementById(t+"_"+s+"LI");if("undefined"==typeof e||null==e){var o=document.createElement("LI");o.id=t+"_"+s+"LI",o.textContent=s,this.slotEl[t].appendChild(o),o=null}s+=1}this.slotEl[t].slotMaxScroll=this.swSlotWrapper.clientHeight-this.slotEl[t].clientHeight-86,thisSlot=null},setPosition:function(t,s){this.slotEl[t].slotYPosition=s,this.slotEl[t].style.webkitTransform="translate3d(0, "+s+"px, 0)"},scrollStart:function(t){for(var s=t.targetTouches[0].clientX-this.swSlots.getBoundingClientRect().left,i=0,e=0;e<this.slotEl.length;e+=1)if(i+=this.slotEl[e].slotWidth,i>s){this.activeSlot=e;break}if(this.slotData[this.activeSlot].style.match("readonly"))return this.swFrame.removeEventListener("touchmove",this,!1),this.swFrame.removeEventListener("touchend",this,!1),!1;this.slotEl[this.activeSlot].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[this.activeSlot].style.webkitTransitionDuration="0";var o=window.getComputedStyle(this.slotEl[this.activeSlot]).webkitTransform;return o=new WebKitCSSMatrix(o).m42,o!=this.slotEl[this.activeSlot].slotYPosition&&this.setPosition(this.activeSlot,o),this.startY=t.targetTouches[0].clientY,this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition,this.scrollStartTime=t.timeStamp,this.swFrame.addEventListener("touchmove",this,!1),this.swFrame.addEventListener("touchend",this,!1),!0},scrollMove:function(t){var s=t.targetTouches[0].clientY-this.startY;(this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll)&&(s/=2),this.setPosition(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition+s),this.startY=t.targetTouches[0].clientY,t.timeStamp-this.scrollStartTime>80&&(this.scrollStartY=this.slotEl[this.activeSlot].slotYPosition,this.scrollStartTime=t.timeStamp)},scrollEnd:function(t){if(this.swFrame.removeEventListener("touchmove",this,!1),this.swFrame.removeEventListener("touchend",this,!1),this.slotEl[this.activeSlot].slotYPosition>0||this.slotEl[this.activeSlot].slotYPosition<this.slotEl[this.activeSlot].slotMaxScroll)return this.scrollTo(this.activeSlot,this.slotEl[this.activeSlot].slotYPosition>0?0:this.slotEl[this.activeSlot].slotMaxScroll),!1;var s=this.slotEl[this.activeSlot].slotYPosition-this.scrollStartY;if(s<this.cellHeight/1.5&&s>-this.cellHeight/1.5)return this.slotEl[this.activeSlot].slotYPosition%this.cellHeight&&this.scrollTo(this.activeSlot,Math.round(this.slotEl[this.activeSlot].slotYPosition/this.cellHeight)*this.cellHeight,"100ms"),!1;var i=t.timeStamp-this.scrollStartTime,e=2*s/i/this.friction,o=this.friction/2*(e*e);0>e&&(e=-e,o=-o);var l=this.slotEl[this.activeSlot].slotYPosition+o;return l>0?(l/=2,e/=3,l>this.swSlotWrapper.clientHeight/4&&(l=this.swSlotWrapper.clientHeight/4)):l<this.slotEl[this.activeSlot].slotMaxScroll?(l=(l-this.slotEl[this.activeSlot].slotMaxScroll)/2+this.slotEl[this.activeSlot].slotMaxScroll,e/=3,l<this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4&&(l=this.slotEl[this.activeSlot].slotMaxScroll-this.swSlotWrapper.clientHeight/4)):l=Math.round(l/this.cellHeight)*this.cellHeight,this.scrollTo(this.activeSlot,Math.round(l),Math.round(e)+"ms"),!0},scrollTo:function(t,s,i){this.slotEl[t].style.webkitTransitionDuration=i?i:"100ms",this.setPosition(t,s?s:0),(this.slotEl[t].slotYPosition>0||this.slotEl[t].slotYPosition<this.slotEl[t].slotMaxScroll)&&this.slotEl[t].addEventListener("webkitTransitionEnd",this,!1),this.setSelectedItem(t)},setSelectedItem:function(t){index=-Math.round(this.slotEl[t].slotYPosition/this.cellHeight);for(var s in this.slotEl[t].childNodes)this.slotEl[t].childNodes[s].className=s==index?"selected ":"";try{this.onValueSelectedAction(t,index)}catch(i){}},scrollToValue:function(t,s){var i,e,o;if(this.slotEl){this.slotEl[t].removeEventListener("webkitTransitionEnd",this,!1),this.slotEl[t].style.webkitTransitionDuration="200ms",e=0;for(o in this.slotData[t].values){if(o==s){i=e*this.cellHeight,this.setPosition(t,i);break}e-=1}this.setSelectedItem(t)}},backWithinBoundaries:function(t){return t.target.removeEventListener("webkitTransitionEnd",this,!1),this.scrollTo(t.target.slotPosition,t.target.slotYPosition>0?0:t.target.slotMaxScroll,"150ms"),!1},tapDown:function(t){t.currentTarget.addEventListener("touchmove",this,!1),t.currentTarget.addEventListener("touchend",this,!1),t.currentTarget.className="sw-pressed"},tapCancel:function(t){t.currentTarget.removeEventListener("touchmove",this,!1),t.currentTarget.removeEventListener("touchend",this,!1),t.currentTarget.className=""},tapUp:function(t){this.tapCancel(t),"sw-cancel"==t.currentTarget.id?this.cancelAction():this.doneAction(),this.close()},setCancelAction:function(t){this.cancelAction=t},setDoneAction:function(t){this.doneAction=t},setSlotScrollEndAction:function(t){this.scrollEndAction=t},onValueSelected:function(t){this.onValueSelectedAction=t},cancelAction:function(){return!1},cancelDone:function(){return!0},scrollEndAction:function(){return!1}};